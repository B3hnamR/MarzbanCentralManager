# Marzban Central Manager

<p align="center">
  ฺฉ ุงุจุฒุงุฑ ูุฏุฑุชููุฏ ู ุญุฑููโุง ุจุฑุง ูุฏุฑุช ูุชูุฑฺฉุฒุ ูพุดุชุจุงูโฺฏุฑุ ูุงูุชูุฑูฺฏ ู ููฺฏุงูโุณุงุฒ ุดุจฺฉูโุง ุงุฒ ุณุฑูุฑูุง ูุฑุฒุจุงู (Marzban Nodes)

---

## ๐ ูุนุฑู ูพุฑูฺู

ูุฏุฑุช ฺูุฏู ุณุฑูุฑ ูุฑุฒุจุงู (Node) ุจู ุตูุฑุช ูุฌุฒุง ูโุชูุงูุฏ ฺฉุงุฑ ุฒูุงูโุจุฑ ู ูพฺุฏู ุจุงุดุฏ. **Marzban Central Manager** ุงู ูุดฺฉู ุฑุง ุจุง ูุฑุงูู ฺฉุฑุฏู ฺฉ ูพูู ูุฏุฑุช ูุชูุฑฺฉุฒ ูุจุชู ุจุฑ ุชุฑููุงู ุญู ูโฺฉูุฏ. ุจุง ุงู ุงุณฺฉุฑูพุช ูโุชูุงูุฏ ุชูุงู ููุฏูุง ุฎูุฏ ุฑุง ุงุฒ ฺฉ ููุทู ูุฏุฑุช ฺฉูุฏุ ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ ุขูโูุง ุจฺฉุงูพ ุจฺฏุฑุฏุ ฺฉุงููฺฏโูุง ุฑุง ููฺฏุงูโุณุงุฒ ฺฉูุฏ ู ูุถุนุช ุณูุงูุช ุขูโูุง ุฑุง ุจู ุทูุฑ ูุฏุงูู ุฒุฑ ูุธุฑ ุฏุงุดุชู ุจุงุดุฏ.

ุงู ูพุฑูฺู ุจุฑุง ูุฏุฑุงู ุณุฑูุฑ ุทุฑุงุญ ุดุฏู ุงุณุช ฺฉู ุจู ุฏูุจุงู ุงุชููุงุณููุ ูพุงุฏุงุฑ ู ุณูููุช ุฏุฑ ูุฏุฑุช ุฒุฑุณุงุฎุช ูุฑุฒุจุงู ุฎูุฏ ูุณุชูุฏ.

## โจ ูุงุจูุชโูุง ฺฉูุฏ

-   **๐ฅ๏ธ ูุฏุฑุช ูุชูุฑฺฉุฒ ููุฏูุง:** ุงูุฒูุฏูุ ุญุฐู ู ูุฑุงุด ููุฏูุง ุงุฒ ุทุฑู ฺฉ ููู ุชุนุงูู.
-   **๐พ ุณุณุชู ูพุดุชุจุงูโฺฏุฑ ุฌุงูุน:**
    -   ุจฺฉุงูพ ฺฉุงูู ุงุฒ ุณุฑูุฑ ุงุตู (ุดุงูู Marzban, Nginx, HAProxy) ู ุชูุงู ููุฏูุง.
    -   ุฒูุงูโุจูุฏ ุฎูุฏฺฉุงุฑ ุจฺฉุงูพโูุง ุฑูุฒุงูู ุจุง ูุงุจูุช ุชูุธู ุณุงุนุช.
    -   ุณุงุณุช ูฺฏูุฏุงุฑ ุจฺฉุงูพ (Retention Policy) ุจุฑุง ูุฏุฑุช ูุถุง ุฐุฎุฑูโุณุงุฒ.
-   **๐ ููฺฏุงูโุณุงุฒ ูพุดุฑูุชู:**
    -   ููฺฏุงูโุณุงุฒ ุฎูุฏฺฉุงุฑ ฺฉุงููฺฏ **HAProxy** ุฏุฑ ุชูุงู ููุฏูุง ุจุง ูุงุจูุช ุจุงุฒฺฏุดุช (Rollback) ุฏุฑ ุตูุฑุช ุจุฑูุฒ ุฎุทุง.
    -   ููฺฏุงูโุณุงุฒ ูุงูโูุง **GeoIP ู Geosite** ุจุฑุง ฺฉูพุงุฑฺฺฏ ููุงูู ูุณุฑุงุจ.
    -   ุงูุชูุงู ฺฉุงุฑุจุฑุงู ุจู ููุฏูุง.
-   **๐ง ูุตุจ ู ุฑุงูโุงูุฏุงุฒ ุฎูุฏฺฉุงุฑ (Automated Deployment):**
    -   ูุตุจ ู ูพฺฉุฑุจูุฏ ฺฉุงูู ฺฉ ุณุฑูุฑ ุฌุฏุฏ ุจู ุนููุงู Marzban-Node ุชููุง ุจุง ฺฉ ุฏุณุชูุฑ.
-   **๐ก ูุงูุชูุฑูฺฏ ู ุงุทูุงุนโุฑุณุงู:**
    -   ุจุฑุฑุณ ูุฏุงูู ูุถุนุช ุณูุงูุช (Online/Offline) ู ุชุทุงุจู ฺฉุงููฺฏ ููุฏูุง.
    -   ููฺฏุงูโุณุงุฒ ูุฌุฏุฏ ุฎูุฏฺฉุงุฑ (Auto-Resync) ุฏุฑ ุตูุฑุช ุดูุงุณุง ุนุฏู ุชุทุงุจู.
    -   ุงุฑุณุงู **ููุชูฺฉุดู ุชูฺฏุฑุงู** ุจุฑุง ุฑูุฏุงุฏูุง ููู (ุจฺฉุงูพุ ุฎุทุงูุงุ ูุถุนุช ููุฏูุง).
-   **โ๏ธ ุงุจุฒุงุฑูุง ุชุดุฎุต (Diagnostics):**
    -   ููุงุด ุฒูุฏู ููุงุจุน ุณุณุชู (CPU, RAM, Disk).
    -   ุชุณุช ุงุชุตุงู ุดุจฺฉู ู ูุถุนุช ุณุฑูุณโูุง ฺฉูุฏ.
    -   ูุดุงูุฏู ูุงฺฏโูุง ุณุณุชู ุจู ุตูุฑุช ุฏุณุชูโุจูุฏ ุดุฏู.
-   **๐ค ุฑุงุจุท ฺฉุงุฑุจุฑ ููุดููุฏ:**
    -   ููู ฺฉุงููุงู ุชุนุงูู ู ฺฉุงุฑุจุฑูพุณูุฏ.
    -   ูุตุจ ุฎูุฏฺฉุงุฑ ูพุดโูุงุฒูุง ููุฑุฏ ูุงุฒ.
    -   ูุงฺฏโฺฏุฑ ูพุดุฑูุชู ู ุฑูฺฏ ุจุฑุง ุฎูุงูุง ุจูุชุฑ.

##  ูุนูุงุฑ

ุงู ูพุฑูฺู ุงุฒ ุฏู ุฌุฒุก ุงุตู ุชุดฺฉู ุดุฏู ุงุณุช:
1.  **`marzban_central_manager.sh`**: ุงุณฺฉุฑูพุช ุงุตู ฺฉู ุฑู ุณุฑูุฑ ูุฑฺฉุฒ ุดูุง ุงุฌุฑุง ุดุฏู ู ุจู ุนููุงู ูพูู ฺฉูุชุฑู ุนูู ูโฺฉูุฏ.
2.  **`marzban_node_deployer.sh`**: ฺฉ ุงุณฺฉุฑูพุช ฺฉูฺฉ ฺฉู ุจุฑุง ุขูุงุฏูโุณุงุฒ ู ูุตุจ ูุฑุฒุจุงู ุฑู ุณุฑูุฑูุง ุฌุฏุฏ (ููุฏูุง) ุงุณุชูุงุฏู ูโุดูุฏ.

## ๐ ูพุดโูุงุฒูุง

-   ฺฉ ุณุฑูุฑ ูุฑฺฉุฒ (ุชุฑุฌุญุงู Debian/Ubuntu) ุจุฑุง ุงุฌุฑุง ุงุณฺฉุฑูพุช ูุฏุฑุช.
-   ฺฉ ุง ฺูุฏ ุณุฑูุฑ ุจุฑุง ุงุณุชูุงุฏู ุจู ุนููุงู ููุฏ.
-   ุฏุณุชุฑุณ `root` ุจู ุณุฑูุฑูุง.
-   ูพุดโูุงุฒูุง ูุงููุฏ `curl`, `jq`, `sshpass` ู `rsync` ฺฉู ุงุณฺฉุฑูพุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุชูุงุด ุจู ูุตุจ ุขูโูุง ูโฺฉูุฏ.

## โ๏ธ ูุตุจ ู ุฑุงูโุงูุฏุงุฒ

ฑ. ุงุจุชุฏุง ูพุฑูฺู ุฑุง ุงุฒ ฺฏุชโูุงุจ ฺฉููู ฺฉูุฏ:
```
git clone https://github.com/behnamrjd/MarzbanCentralManager.git
```

ฒ. ูุงุฑุฏ ูพูุดู ูพุฑูฺู ุดุฏู ู ุงุณฺฉุฑูพุช ุงุตู ุฑุง ุงุฌุฑุง ฺฉูุฏ:
```
cd MarzbanCentralManager/MarzbanManager
chmod +x marzban_central_manager.sh
./marzban_central_manager.sh
```
ุฏุฑ ุงููู ุงุฌุฑุงุ ุงุณฺฉุฑูพุช ุดูุง ุฑุง ุจุฑุง ุงูุฌุงู ุชูุธูุงุช ุงููู ุฑุงูููุง ูโฺฉูุฏ.

## ๐ก ูุญูู ุงุณุชูุงุฏู

ูพุณ ุงุฒ ุงุฌุฑุง ุงุณฺฉุฑูพุชุ ููู ุงุตู ููุงุด ุฏุงุฏู ูโุดูุฏ ฺฉู ุงุฒ ุทุฑู ุขู ูโุชูุงูุฏ ุจู ุชูุงู ูุงุจูุชโูุง ุฏุณุชุฑุณ ุฏุงุดุชู ุจุงุดุฏ. ฺฏุฒููโูุง ุจู ุตูุฑุช ูุงุถุญ ุฏุณุชูโุจูุฏ ุดุฏูโุงูุฏ:

-   **ูุฏุฑุช ููุฏูุง:** ุจุฑุง ุงูุฒูุฏู ุง ุญุฐู ุณุฑูุฑูุง ุฎูุฏ.
-   **ููฺฏุงูโุณุงุฒ:** ุจุฑุง ฺฉุณุงูโุณุงุฒ ฺฉุงุฑุจุฑุงู ุง ฺฉุงููฺฏโูุง.
-   **ุจฺฉุงูพ ู ุจุงุฒุงุจ:** ุจุฑุง ูุฏุฑุช ูพุดุชุจุงูโฺฏุฑ.
-   **ุงุจุฒุงุฑูุง ุชุดุฎุต:** ุจุฑุง ุจุฑุฑุณ ูุถุนุช ุณุณุชู ู ุดุจฺฉู.

## ๐ ูุงูโูุง ฺฉุงููฺฏ

ุชูุธูุงุช ุงุตู ู ูุณุช ููุฏูุง ุฏุฑ ูุงูโูุง ุฒุฑ ุฏุฑ ูุณุฑ `/root/MarzbanManager` ุฐุฎุฑู ูโุดููุฏ:

-   `marzban_manager.conf`: ุชูุธูุงุช ุงุตู ุงุณฺฉุฑูพุช (ูุงููุฏ ุชูฺฉู ุชูฺฏุฑุงู).
-   `marzban_managed_nodes.conf`: ูุณุช ู ุงุทูุงุนุงุช ููุฏูุง ูุฏุฑุชโุดุฏู.

## ๐ค ูุดุงุฑฺฉุช

ุงุฒ ูุดุงุฑฺฉุช ุดูุง ุฏุฑ ุงู ูพุฑูฺู ุงุณุชูุจุงู ูโุดูุฏ. ุจุฑุง ุจูุจูุฏ ูพุฑูฺู ูโุชูุงูุฏ Pull Request ุงุฑุณุงู ฺฉุฑุฏู ุง Issue ุซุจุช ฺฉูุฏ.

## ๐ ูุฌูุฒ ู ุดุฑุงุท ุงุณุชูุงุฏู

ุงู ุงุณฺฉุฑูพุช ุฑุง ุจุฑุง ุงุณุชูุงุฏู ุดุฎุต ู ฺฉูฺฉ ุจู ุฌุงูุนู ูุฑุฒุจุงู ููุดุชู. ุจุง ุฎุงู ุฑุงุญุช ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูุฏ. ุงฺฏุฑ ุจุฑุงุชุงู ููุฏ ุจูุฏุ ฺฉ ุณุชุงุฑู โญ ุฏุฑ ฺฏุชโูุงุจ ุจุงุนุซ ุฏูฺฏุฑู ุงุณุช.

```
